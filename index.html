<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Divine Path • Multi-Dasha + Numerology (Offline)</title>
<meta name="description" content="Vimshottari, Ashtottari, Yogini Dasha calculator + Numerology by Poonam (Poornika) • Offline single file.">

<style>
  :root{
    --bg:#0b0d10; --glass:#10151dba; --card:#0f1320f2;
    --muted:#a6b0c3; --text:#e8ecf6;
    --brand:#ffd166; --brand2:#8ec5ff; --accent:#e08cff;
    --ok:#31d0aa; --warn:#ff9557;
    --radius:20px; --shadow:0 18px 50px rgba(0,0,0,.45);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    color:var(--text);
    background:
      radial-gradient(1200px 800px at 10% -10%, #1b2230 0%, transparent 60%),
      radial-gradient(900px 600px at 90% 10%, #261a3a 0%, transparent 60%),
      linear-gradient(180deg,#0b0d10 0%, #0b0d10 100%);
    background-attachment: fixed;
  }
  .nav{position:sticky;top:0;z-index:50;backdrop-filter:saturate(140%) blur(12px);
    background:linear-gradient(180deg,#0b0d10cc,#0b0d10aa);border-bottom:1px solid #1f2530}
  .wrap{max-width:1100px;margin:auto;padding:14px 20px;display:flex;align-items:center;justify-content:space-between;gap:16px}
  .brand{display:flex;align-items:center;gap:.6rem;font-weight:900;color:var(--brand)}
  .brand .dot{width:10px;height:10px;border-radius:50%;background:var(--accent);box-shadow:0 0 16px var(--accent)}
  main{max-width:1100px;margin:34px auto;padding:0 20px}
  .hero{position:relative;overflow:hidden;border-radius:26px;padding:26px;border:1px solid #1f2530;box-shadow:var(--shadow);
    background:radial-gradient(1200px 800px at 120% -10%, #452a7a66 0%, transparent 60%), linear-gradient(180deg,#0e1220,#0b0d10)}
  .hero h1{font-size:clamp(1.8rem,3.2vw,2.4rem);font-weight:900}
  .note{color:var(--muted);margin-top:8px}
  .grid{display:grid;gap:22px;margin-top:22px}
  @media(min-width:960px){.grid{grid-template-columns:1.05fr .95fr}}
  .card{background:linear-gradient(180deg,var(--card),#0f1320ee);border:1px solid #1f2530;border-radius:22px;padding:18px;box-shadow:var(--shadow)}
  .pill{display:inline-block;padding:.4rem .7rem;border:1px solid #2a3350;border-radius:999px;color:#cbd3e6;font-size:.78rem;margin-bottom:10px}
  .row{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
  label{font-weight:700;font-size:.92rem}
  input,select{
    width:100%;padding:14px;border-radius:14px;border:1px solid #253148;margin-top:6px;
    background:linear-gradient(180deg,#0e1420d6,#0c111ad6);
    color:var(--text);outline:none;transition:.25s;border-bottom:1px solid #2a3550;
    box-shadow:inset 0 0 0 1px #0d1320, inset 0 10px 30px rgba(0,0,0,.35);
  }
  input:focus,select:focus{border-color:#3b4b73;box-shadow:inset 0 0 0 1px #3b4b73, 0 8px 26px rgba(0,0,0,.25)}
  .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
  .btn{
    display:inline-flex;align-items:center;gap:.55rem;padding:.95rem 1.2rem;border-radius:999px;text-decoration:none;
    color:#0d0f14;font-weight:900;letter-spacing:.2px;
    background:radial-gradient(120% 180% at 10% -10%, #ffffffc0 0%, #ffffff00 40%) ,
               linear-gradient(135deg,var(--brand),#ff9f4d);
    border:1px solid #ffcc7a; box-shadow:0 8px 28px rgba(255,185,72,.45), inset 0 0 0 1px #fff4;
    transform:translateY(0); transition:transform .2s ease, box-shadow .25s ease, filter .25s ease; position:relative; overflow:hidden;
  }
  .btn::after{
    content:""; position:absolute; inset:0;
    background:radial-gradient(60px 60px at var(--mx,20%) var(--my,10%), #ffffff66, transparent 40%);
    mix-blend-mode:screen; transition:opacity .2s; opacity:.8; pointer-events:none;
  }
  .btn:hover{transform:translateY(-2px); box-shadow:0 14px 34px rgba(255,185,72,.6)}
  .ghost{
    display:inline-flex;align-items:center;gap:.5rem;padding:.95rem 1.2rem;border-radius:999px;
    color:#cfe0ff;text-decoration:none;font-weight:800;border:1px solid #2c3a56;background:linear-gradient(180deg,#0b1220cc,#0c111acc);
    box-shadow:inset 0 0 0 1px #2b3752, 0 8px 26px rgba(0,0,0,.3); transition:.2s; backdrop-filter: blur(10px);
  }
  .ghost:hover{transform:translateY(-2px);border-color:#3b4b73}
  .table{width:100%;border-collapse:collapse;margin-top:12px}
  .table th,.table td{padding:10px 12px;border-bottom:1px solid #223048}
  .table th{font-size:.9rem;text-transform:uppercase;letter-spacing:.08em;color:#c0cae0;background:#11182a}
  .muted{color:var(--muted)}
  .tag{display:inline-block;padding:.28rem .6rem;border-radius:999px;font-weight:800;font-size:.76rem}
  .t-info{background:linear-gradient(135deg,#d6e7ff,#8ec5ff); color:#09233a}
  .t-good{background:linear-gradient(135deg,#b7ffd5,#31d0aa); color:#073327}
  .t-warn{background:linear-gradient(135deg,#ffe0c9,#ff9557); color:#3b1d00}
  footer{margin:26px 0 40px;color:#9fb0c9;text-align:center}
</style>
</head>
<body>
  <header class="nav">
    <div class="wrap">
      <div class="brand"><span class="dot"></span> Divine Path</div>
      <a class="ghost" href="#calc">Open Calculator</a>
    </div>
  </header>

  <main id="calc">
    <section class="hero">
      <h1>Multi-Dasha + Numerology Calculator (Offline)</h1>
      <p class="note">यह tool <b>Poonam (Poornika)</b> की Divine Path suite का हिस्सा है — पिछली website का advanced, single-file offline version. कोई external dependency नहीं।</p>
      <div class="actions" style="margin-top:10px">
        <a class="btn" href="#form">Start Calculation ✨</a>
        <a class="ghost" href="#about">About Poonam</a>
      </div>
    </section>

    <section id="form" class="grid">
      <div class="card">
        <span class="pill">Birth & Name Details</span>
        <div class="row">
          <div><label>Full Name</label><input id="name" placeholder="Your Name" /></div>
          <div><label>Date</label><input type="date" id="dob" /></div>
          <div><label>Time</label><input type="time" id="tob" /></div>
          <div><label>Timezone (±hh:mm)</label><input id="tz" placeholder="+05:30" value="+05:30" /></div>
          <div><label>Longitude (°E + / °W −) <span class="muted">(optional)</span></label><input id="lon" placeholder="85.137" /></div>
          <div><label>Latitude (°N + / °S −) <span class="muted">(optional)</span></label><input id="lat" placeholder="25.612" /></div>
        </div>
        <div class="actions">
          <button class="btn" id="calcBtn">Calculate All</button>
          <button class="ghost" id="shareBtn">Share</button>
          <button class="ghost" id="copyBtn">Copy Summary</button>
        </div>
      </div>

      <div class="card">
        <span class="pill">Astro Summary</span>
        <div id="astroSummary" class="muted">Fill details and click “Calculate All”.</div>
        <table class="table" id="vimTable" style="display:none">
          <thead><tr><th>#</th><th>Vimshottari</th><th>From</th><th>To</th><th>Years</th><th>Antardasha</th></tr></thead>
          <tbody></tbody>
        </table>
        <table class="table" id="ashtTable" style="display:none">
          <thead><tr><th>#</th><th>Ashtottari</th><th>From</th><th>To</th><th>Years</th><th>Antardasha</th></tr></thead>
          <tbody></tbody>
        </table>
        <table class="table" id="yogTable" style="display:none">
          <thead><tr><th>#</th><th>Yogini</th><th>From</th><th>To</th><th>Years</th><th>Antardasha</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="card">
        <span class="pill">Numerology (Pythagorean)</span>
        <div id="numSummary" class="muted">Your core numbers will appear here.</div>
        <table class="table" id="numTable" style="display:none">
          <thead><tr><th>Number</th><th>Value</th><th>How computed</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="about" class="card" style="margin-top:22px">
      <span class="pill">About Poonam</span>
      <h3 style="font-size:1.25rem;margin-bottom:6px">Hi, I’m Poonam (Poornika)</h3>
      <p class="muted">Tarot reader & spiritual guide. This calculator gives fast, offline Dasha timelines and Numerology insights.</p>
      <p class="muted" style="margin-top:6px">For personal readings: <b>divinepath743@gmail.com</b> • WhatsApp: <b>+91 9835230370</b> • Instagram: <b>@punamtarotcardreader</b>.</p>
      <div class="actions" style="margin-top:10px">
        <a class="btn" href="mailto:divinepath743@gmail.com">Email</a>
        <a class="ghost" href="https://wa.me/919835230370" target="_blank" rel="noopener">WhatsApp</a>
        <a class="ghost" href="https://instagram.com/punamtarotcardreader" target="_blank" rel="noopener">Instagram</a>
      </div>
    </section>

    <footer>© 2025 Divine Path — Poonam/Poornika • Premium glass UI • Works fully offline • Built with ❤️</footer>
  </main>

<script>
/* ================= Premium micro-interactions ================= */
document.querySelectorAll('.btn').forEach(b=>{
  b.addEventListener('pointermove',e=>{
    const r=b.getBoundingClientRect();
    b.style.setProperty('--mx', ((e.clientX-r.left)/r.width*100)+'%');
    b.style.setProperty('--my', ((e.clientY-r.top)/r.height*100)+'%');
  })
});

/* ================= Safe helpers ================= */
const DEG2RAD=Math.PI/180, RAD2DEG=180/Math.PI;
const NAKS=["Ashwini","Bharani","Krittika","Rohini","Mrigashira","Ardra","Punarvasu","Pushya","Ashlesha","Magha","Purva Phalguni","Uttara Phalguni","Hasta","Chitra","Swati","Vishakha","Anuradha","Jyeshtha","Mula","Purva Ashadha","Uttara Ashadha","Shravana","Dhanishtha","Shatabhisha","Purva Bhadrapada","Uttara Bhadrapada","Revati"];
function clamp360(x){x=x%360; return x<0?x+360:x;}
function toJD(date){return Date.UTC(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds())/86400000+2440587.5;}
function parseTZ(s){const m=/^([+-])?(\d{1,2}):?(\d{2})$/.exec((s||"").trim()); if(!m) return NaN; const sign=m[1]==='-'?-1:1; return sign*(+m[2]+(+m[3]/60));}
function fmt(d){return d.toISOString().slice(0,10);}
function addYears(date, years){const d=new Date(date.getTime()); d.setUTCFullYear(d.getUTCFullYear()+Math.trunc(years)); const frac=years-Math.trunc(years); d.setUTCDate(d.getUTCDate()+Math.round(frac*365.25)); return d;}

/* ================= Offline Moon longitude (approx) =================
   Enough for nakshatra & balance. */
function moonSiderealLongitude(jd){
  const T=(jd-2451545.0)/36525;
  let Lp=218.3164477+481267.88123421*T-0.0015786*T*T+T*T*T/538841-T*T*T*T/65194000;
  let Ms=357.5291092+35999.0502909*T-0.0001536*T*T+T*T*T/24490000;
  let Mm=134.9633964+477198.8675055*T+0.0087414*T*T+T*T*T/69699-T*T*T*T/14712000;
  let D =297.8501921+445267.1114034*T-0.0018819*T*T+T*T*T/545868-T*T*T*T/113065000;
  let F =93.2720950 +483202.0175233*T-0.0036539*T*T-T*T*T/3526000+T*T*T*T/863310000;
  const lon = Lp + 6.288774*Math.sin(DEG2RAD*Mm)
                 + 1.274027*Math.sin(DEG2RAD*(2*D - Mm))
                 + 0.658314*Math.sin(DEG2RAD*(2*D))
                 + 0.213618*Math.sin(DEG2RAD*(2*Mm))
                 - 0.185116*Math.sin(DEG2RAD*Ms)
                 - 0.114332*Math.sin(DEG2RAD*(2*F))
                 + 0.058793*Math.sin(DEG2RAD*(2*D - 2*Mm))
                 + 0.057066*Math.sin(DEG2RAD*(2*D - Ms - Mm))
                 + 0.053322*Math.sin(DEG2RAD*(2*D + Mm))
                 + 0.045758*Math.sin(DEG2RAD*(2*D - Ms))
                 + 0.041000*Math.sin(DEG2RAD*(Mm - Ms));
  const days=(jd-2451545.0);
  const lahiri = 24.0 + 0.0000362909*days; // ~23.85° @ J2000 with drift
  return clamp360(lon - lahiri);
}
function nakshatraOf(lon){
  const per=360/27;
  const idx=Math.floor(lon/per);
  const start=idx*per;
  const pada=Math.floor(((lon-start)/per)*4)+1;
  return {index:idx,name:NAKS[idx],pada,startDeg:start,part: (lon-start)/per}; // part 0..1
}

/* ================= Dasha engines ================= */
/* Vimshottari */
const VIM_ORDER=["Ketu","Venus","Sun","Moon","Mars","Rahu","Jupiter","Saturn","Mercury"];
const VIM_YEARS={Ketu:7,Venus:20,Sun:6,Moon:10,Mars:7,Rahu:18,Jupiter:16,Saturn:19,Mercury:17};
const VIM_MAP={ // Nakshatra → start lord
  "Ashwini":"Ketu","Magha":"Ketu","Mula":"Ketu",
  "Bharani":"Venus","Purva Phalguni":"Venus","Purva Ashadha":"Venus",
  "Krittika":"Sun","Uttara Phalguni":"Sun","Uttara Ashadha":"Sun",
  "Rohini":"Moon","Hasta":"Moon","Shravana":"Moon",
  "Mrigashira":"Mars","Chitra":"Mars","Dhanishtha":"Mars",
  "Ardra":"Rahu","Swati":"Rahu","Shatabhisha":"Rahu",
  "Punarvasu":"Jupiter","Vishakha":"Jupiter","Purva Bhadrapada":"Jupiter",
  "Pushya":"Saturn","Anuradha":"Saturn","Uttara Bhadrapada":"Saturn",
  "Ashlesha":"Mercury","Jyeshtha":"Mercury","Revati":"Mercury"
};
/* Ashtottari (Ardrādi) — order & years */
const ASHT_ORDER=["Sun","Moon","Mars","Mercury","Saturn","Jupiter","Rahu","Venus"];
const ASHT_YEARS={Sun:6,Moon:15,Mars:8,Mercury:17,Saturn:10,Jupiter:19,Rahu:12,Venus:21};
/* Yogini */
const YOG_SEQ=["Mangala","Pingala","Dhanya","Bhramari","Bhadrika","Ulka","Siddha","Sankata"];
const YOG_YEARS={Mangala:1,Pingala:2,Dhanya:3,Bhramari:4,Bhadrika:5,Ulka:6,Siddha:7,Sankata:8};
const YOG_LORD={Mangala:"Moon",Pingala:"Sun",Dhanya:"Jupiter",Bhramari:"Mars",Bhadrika:"Mercury",Ulka:"Saturn",Siddha:"Venus",Sankata:"Rahu"};

function cycleFrom(arr, start){const i=arr.indexOf(start); return i<0?arr.slice():arr.slice(i).concat(arr.slice(0,i));}
function buildAntar(order, start, mahaYears, startDate, yearsMap){
  const seq=cycleFrom(order, start);
  const total=seq.reduce((s,l)=>s+(yearsMap?yearsMap[l]:VIM_YEARS[l]),0);
  let cur=new Date(startDate.getTime());
  const out=[];
  for(const l of seq){
    const unit=(yearsMap?yearsMap[l]:VIM_YEARS[l]);
    const span=mahaYears*(unit/total);
    const end=addYears(cur, Math.round(span*365.25)/365.25);
    out.push(`${l}: ${fmt(cur)} → ${fmt(end)}`);
    cur=end;
  }
  return out.join(" | ");
}
function buildVim(birthUTC, moonLon, nak){
  const startLord=VIM_MAP[nak.name];
  const order=cycleFrom(VIM_ORDER, startLord);
  const fracLeft = 1 - nak.part; // portion left in janma-nakshatra
  let cur=new Date(birthUTC.getTime()); const rows=[];
  for(let i=0;i<order.length;i++){
    const lord=order[i]; let yrs=VIM_YEARS[lord]; if(i===0) yrs*=fracLeft;
    const end=addYears(cur, Math.round(yrs*365.25)/365.25);
    const antar=buildAntar(VIM_ORDER, lord, yrs, cur);
    rows.push({i:i+1,lord,from:fmt(cur),to:fmt(end),years:+yrs.toFixed(3),antar});
    cur=end;
  }
  return rows;
}
function buildAsht(birthUTC, nakNum){
  // Ardrādi start index by simple rule:
  const startIdx = (nakNum-1) % 8;
  const order = ASHT_ORDER.slice(startIdx).concat(ASHT_ORDER.slice(0,startIdx));
  let cur=new Date(birthUTC.getTime()); const rows=[];
  for(let i=0;i<order.length;i++){
    const lord=order[i]; const yrs=ASHT_YEARS[lord];
    const end=addYears(cur, Math.round(yrs*365.25)/365.25);
    const antar=buildAntar(ASHT_ORDER, lord, yrs, cur, ASHT_YEARS);
    rows.push({i:i+1,lord,from:fmt(cur),to:fmt(end),years:yrs,antar});
    cur=end;
  }
  return rows;
}
function buildYog(birthUTC, nakNum){
  // start yogini: (nak + 3) mod 8  (0 => Sankata)
  let r = (nakNum + 3) % 8; if(r===0) r=8;
  const start = YOG_SEQ[r-1];
  const order = cycleFrom(YOG_SEQ, start);
  let cur=new Date(birthUTC.getTime()); const rows=[];
  for(let i=0;i<order.length;i++){
    const y=order[i], yrs=YOG_YEARS[y];
    const end=addYears(cur, Math.round(yrs*365.25)/365.25);
    const antar=buildAntar(YOG_SEQ, y, yrs, cur, YOG_YEARS);
    rows.push({i:i+1,lord:`${y} (${YOG_LORD[y]})`,from:fmt(cur),to:fmt(end),years:yrs,antar});
    cur=end;
  }
  return rows;
}

/* ================= Numerology (Pythagorean) ================= */
const LETTER_VAL = {A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,S:1,T:2,U:3,V:4,W:5,X:6,Y:7,Z:8};
function reduceNum(n){ // keep master 11,22,33
  while(n>9 && n!==11 && n!==22 && n!==33){
    n = (""+n).split("").reduce((s,d)=>s+(+d),0);
  }
  return n;
}
function onlyLetters(s){return (s||"").toUpperCase().replace(/[^A-Z]/g,"");}
function isVowel(ch, hasOtherVowelInWord){ // handle Y as vowel if no other vowel in word
  if("AEIOU".includes(ch)) return true;
  if(ch==="Y" && !hasOtherVowelInWord) return true;
  return false;
}
function numerologyFrom(name, dobStr){ // dobStr YYYY-MM-DD
  const letters = onlyLetters(name);
  // Destiny/Expression:
  const exprRaw = letters.split("").reduce((s,c)=>s+(LETTER_VAL[c]||0),0);
  const expression = reduceNum(exprRaw);
  // Soul Urge (vowels):
  const words = (name||"").trim().split(/\s+/).filter(Boolean);
  let soulRaw=0, persRaw=0;
  words.forEach(w=>{
    const up=w.toUpperCase();
    const hasAEIOU = /[AEIOU]/.test(up);
    for(const ch of up){
      const val = LETTER_VAL[ch]||0;
      if(isVowel(ch, hasAEIOU)) soulRaw += val; else if(/[A-Z]/.test(ch)) persRaw += val;
    }
  });
  const soul = reduceNum(soulRaw);
  const personality = reduceNum(persRaw);
  // Life Path (Root):
  const [Y,M,D] = dobStr.split("-").map(v=>+v);
  const lifeRaw = (""+Y+M+ D).split("").reduce((s,d)=>s+(+d),0);
  const lifePath = reduceNum(lifeRaw);
  // Birthday:
  const birthday = reduceNum(D);
  // Maturity:
  const maturity = reduceNum(lifePath + expression);
  return {expression, soul, personality, lifePath, birthday, maturity,
          raw:{expression:exprRaw,soul:soulRaw,personality:persRaw,life:lifeRaw}};
}

/* ================= UI glue ================= */
const $ = s=>document.querySelector(s);
const setHTML=(el,html)=>{el.innerHTML=html;}
const show=(el,yes)=>{el.style.display = yes? (el.tagName==="TABLE"?"table":"block") : "none";}

$("#calcBtn").addEventListener("click", ()=>{
  try{
    const name = $("#name").value.trim() || "Guest";
    const dob = $("#dob").value; if(!dob) throw new Error("Please select Date of Birth.");
    const tob = $("#tob").value || "12:00";
    const tzOff = parseTZ($("#tz").value||"+00:00"); if(isNaN(tzOff)) throw new Error("Invalid timezone (use ±hh:mm).");

    // Build UTC date from local + TZ
    const local = new Date(dob+"T"+tob+":00");
    const birthUTC = new Date(local.getTime() - tzOff*3600*1000);
    const jd = toJD(birthUTC);
    const moonLon = moonSiderealLongitude(jd);
    const nak = nakshatraOf(moonLon);
    const nakNum = nak.index+1;

    // Astro summary
    setHTML($("#astroSummary"),
      `<div><b>${name}</b> • Moon (sidereal): ${moonLon.toFixed(2)}° • Nakshatra: <b>${nak.name}</b> (Pada ${nak.pada})</div>
       <div class="muted">JD: ${jd.toFixed(2)} • This is the Divine Path offline engine.</div>`);

    // Vimshottari
    const vim = buildVim(birthUTC, moonLon, nak);
    renderTable("#vimTable", vim, "Vimshottari");

    // Ashtottari
    const asht = buildAsht(birthUTC, nakNum);
    renderTable("#ashtTable", asht, "Ashtottari");

    // Yogini
    const yog = buildYog(birthUTC, nakNum);
    renderTable("#yogTable", yog, "Yogini");

    // Numerology
    const nums = numerologyFrom(name, dob);
    const lines = [
      ["Life Path (Root)", nums.lifePath, "DOB digits reduced (master numbers kept)"],
      ["Birthday", nums.birthday, "Day of birth reduced"],
      ["Destiny / Expression", nums.expression, "All letters A=1..9 mapping"],
      ["Soul Urge", nums.soul, "Vowels (Y only if word has no other vowel)"],
      ["Personality", nums.personality, "Consonants (letters minus vowels)"],
      ["Maturity", nums.maturity, "Life Path + Expression (reduced)"]
    ];
    const tbody = $("#numTable tbody"); tbody.innerHTML="";
    lines.forEach(([k,v,h])=>{
      const tr=document.createElement("tr");
      tr.innerHTML = `<td><span class="tag t-good">${k}</span></td><td style="font-weight:800">${v}</td><td class="muted">${h}</td>`;
      tbody.appendChild(tr);
    });
    show($("#numTable"), true);
    setHTML($("#numSummary"), `<span class="tag t-info">Numerology Ready</span> Core numbers computed for <b>${name}</b>.`);

  }catch(err){
    alert(err.message);
  }
});

function renderTable(sel, rows, label){
  const table = $(sel);
  const tbody = table.querySelector("tbody");
  tbody.innerHTML="";
  rows.forEach(r=>{
    const tr=document.createElement("tr");
    tr.innerHTML = `<td>${r.i}</td>
      <td><span class="tag t-info">${r.lord}</span></td>
      <td>${r.from}</td><td>${r.to}</td>
      <td>${r.years}</td>
      <td class="muted" style="font-size:.9rem">${r.antar}</td>`;
    tbody.appendChild(tr);
  });
  show(table, true);
}

$("#shareBtn").addEventListener("click", async ()=>{
  const text = buildPlainText();
  if(navigator.share){
    try{ await navigator.share({title:"Divine Path — Dasha & Numerology", text}); }catch(e){}
  } else {
    await navigator.clipboard.writeText(text);
    alert("Summary copied to clipboard.");
  }
});
$("#copyBtn").addEventListener("click", async ()=>{
  const text = buildPlainText();
  await navigator.clipboard.writeText(text);
  alert("Summary copied to clipboard.");
});
function buildPlainText(){
  const head = $("#astroSummary").innerText.replace(/\s+/g," ").trim();
  const blocks = ["# Vimshottari","# Ashtottari","# Yogini"].map((ttl,i)=>{
    const id = ["#vimTable","#ashtTable","#yogTable"][i];
    const t=$(id); if(t.style.display==="none") return "";
    const rows=[...t.querySelectorAll("tbody tr")].map(tr=>{
      const c=tr.children;
      return `${c[0].textContent}. ${c[1].innerText} — ${c[2].textContent} to ${c[3].textContent} (${c[4].textContent}y)`;
    }).join("\n");
    return ttl+"\n"+rows;
  }).join("\n\n");
  const nums = $("#numTable").style.display==="none" ? "" :
    "# Numerology\n" + [...$("#numTable tbody").children].map(tr=>{
      const c=tr.children; return `${c[0].innerText}: ${c[1].innerText}`;
    }).join("\n");
  return `Divine Path — Result\n${head}\n\n${blocks}\n\n${nums}`;
}
</script>
</body>
</html>
