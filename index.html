<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vimshottari Dasha Calculator | Divine Path by Poonam</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0d10; --text:#e7e9ee; --muted:#aab2c5; --card:#0e1421cc; --stroke:#222c41;
    --brand:#ffd166; --brand2:#8ec5ff; --accent:#e08cff; --ok:#4ade80; --warn:#fb7185;
    --radius:18px; --shadow:0 18px 50px rgba(0,0,0,.45);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html{scroll-behavior:smooth}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;color:var(--text);min-height:100vh;background:var(--bg);
    background:radial-gradient(1200px 800px at 10% -10%, #1b2230 0%, transparent 60%),radial-gradient(900px 600px at 90% 10%, #261a3a 0%, transparent 60%),linear-gradient(180deg,#0b0d10 0%, #0b0d10 100%);background-attachment:fixed}
  .wrap{max-width:1150px;margin:auto;padding:24px}
  header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(140%) blur(10px);background:linear-gradient(180deg,#0b0d10dd,#0b0d10bb);border-bottom:1px solid #1b2333}
  header .bar{max-width:1150px;margin:auto;padding:14px 20px;display:flex;align-items:center;justify-content:space-between;gap:16px}
  .brand{font-family:"Playfair Display",serif;font-weight:700;color:var(--brand);display:flex;gap:.6rem;align-items:center}
  .brand .dot{width:10px;height:10px;border-radius:50%;background:var(--accent);box-shadow:0 0 16px var(--accent)}
  nav ul{display:flex;gap:20px;list-style:none}
  nav a{color:var(--text);text-decoration:none;font-weight:600;opacity:.9}
  nav a:hover{color:var(--brand)}
  .btn,.ghost{position:relative;isolation:isolate;display:inline-flex;align-items:center;gap:.55rem;padding:.9rem 1.15rem;border-radius:999px;text-decoration:none;font-weight:800;transform:translateY(0) scale(1);transition:.35s ease;overflow:hidden;backdrop-filter: blur(10px) saturate(140%);box-shadow:0 10px 24px rgba(0,0,0,.35)}
  .btn{background:linear-gradient(135deg,#ffffff33,#ffffff12),radial-gradient(60% 120% at 20% 0%, var(--brand) 0%, #ff9f4d 55%, #ff7b33 100%);color:#272316;border:1px solid #ffffff55}
  .ghost{background:linear-gradient(135deg,#1a2030aa,#0f1320aa);color:#d8deec;border:1px solid #3a455c}
  .btn::before,.ghost::before{content:"";position:absolute;inset:auto auto 8% 10%;width:86%;height:42%;background:radial-gradient(120% 120% at 50% 0%,#ffffff80 0%,#ffffff10 55%,transparent 70%);border-radius:999px;filter:blur(2px);opacity:.7;pointer-events:none;transform:translateY(0);transition:transform .35s ease,opacity .35s ease}
  .btn::after,.ghost::after{content:"";position:absolute;top:10%;right:12%;width:18px;height:18px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#fff8 0%,#fff2 45%,#fff0 70%);box-shadow:inset 0 0 10px #fff3, 0 8px 14px #0004;filter:blur(.2px);animation:float 3.2s ease-in-out infinite}
  .btn:hover,.ghost:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 16px 28px rgba(0,0,0,.45)}
  .btn:active,.ghost:active{transform:translateY(0) scale(.99)}
  @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
  .hero{display:grid;place-items:center;text-align:center;min-height:58vh;position:relative;overflow:hidden}
  .hero .bg{position:absolute;inset:-10% -10%;background:url('https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1600&auto=format&fit=crop') center/cover no-repeat;filter:brightness(.35) contrast(1.05)}
  .hero .veil{position:absolute;inset:0;background:radial-gradient(60% 60% at 50% 40%, #0000 0%, #0b0d10 90%)}
  .hero .content{position:relative;padding:0 20px;max-width:900px}
  .kicker{color:var(--brand);font-weight:800;letter-spacing:.15em;text-transform:uppercase;font-size:.82rem;opacity:.9}
  h1{font-family:"Playfair Display",serif;font-size:clamp(2.2rem,4.8vw,3.2rem);line-height:1.1;margin:.6rem 0 1rem;text-shadow:0 10px 30px rgba(0,0,0,.6)}
  .sub{max-width:680px;margin:auto;color:var(--muted)}
  .section{max-width:1150px;margin:64px auto;padding:0 20px}
  .card{background:linear-gradient(180deg,var(--card),#0f1320ee);border:1px solid var(--stroke);border-radius:var(--radius);box-shadow:var(--shadow);padding:22px}
  .grid{display:grid;gap:22px}
  .lead{color:var(--muted)}
  .row{display:grid;gap:12px}
  @media(min-width:780px){.grid2{display:grid;grid-template-columns:1.15fr .85fr;gap:22px}.row{grid-template-columns:1fr 1fr}}
  .input,.select{width:100%;padding:14px 16px;border-radius:14px;border:1px solid #2a3550;background:#0f1422;box-shadow:inset 0 0 0 1px #0008;color:#e7e9ee;font-weight:600}
  .hint{font-size:.85rem;color:#aab2c5}
  .table{width:100%;border-collapse:separate;border-spacing:0 10px}
  .table th{font-size:.9rem;color:#cdd6ea;text-align:left;padding:6px 10px}
  .table td{padding:12px 10px;background:linear-gradient(160deg,#121725,#0f1320);border:1px solid #21293a}
  .table tr td:first-child{border-top-left-radius:12px;border-bottom-left-radius:12px}
  .table tr td:last-child{border-top-right-radius:12px;border-bottom-right-radius:12px}
  .tag{display:inline-block;font-size:.78rem;border:1px solid #33415e;border-radius:999px;padding:.18rem .55rem;color:#d0d7ea;margin-left:8px}
  .current{box-shadow:0 0 0 1px #ffd166aa, 0 0 20px #ffd16633}
  footer{margin:60px 0 24px;text-align:center;color:#a9b3c9}
  a.link{color:var(--brand);text-decoration:none}
</style>
</head>
<body>
<header>
  <div class="bar">
    <div class="brand"><span class="dot"></span> Divine Path</div>
    <nav><ul>
      <li><a href="#calc">Calculator</a></li>
      <li><a href="#about">About</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul></nav>
    <a class="btn" href="#contact">Book a Reading ✨</a>
  </div>
</header>

<section class="hero" id="home">
  <div class="bg" aria-hidden="true"></div><div class="veil" aria-hidden="true"></div>
  <div class="content">
    <div class="kicker">Vedic Astrology • Vimshottari</div>
    <h1>Vimshottari Dasha Calculator</h1>
    <p class="sub">Yeh tool <strong>Divine Path (Tarot by Poonam)</strong> ki website ka hi practical hissa hai — aapke Janma Nakshatra (Moon) par adharit <em>Mahadasha</em> aur <em>Antardasha</em> timeline generate karta hai. Accurate results ke liye Moon longitude ya Nakshatra-Pada sahi dena zaroori hai.</p>
    <div style="margin-top:16px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
      <a class="btn" href="#calc">Start Now</a>
      <a class="ghost" href="#about">How it works</a>
    </div>
  </div>
</section>

<section id="calc" class="section grid2">
  <div class="card">
    <h2>Input</h2>
    <p class="lead">Do modes: (A) Moon longitude enter karo; ya (B) Nakshatra + Pada select karo. DOB/Time local time me daalein. Timezone bhi set karein.</p>
    <div class="row" style="margin-top:10px">
      <div>
        <label class="hint">Full Name (optional)</label>
        <input id="name" class="input" placeholder="e.g., Poonam Sharma" />
      </div>
      <div>
        <label class="hint">Date of Birth</label>
        <input id="dob" class="input" type="date" />
      </div>
    </div>
    <div class="row">
      <div>
        <label class="hint">Time of Birth</label>
        <input id="tob" class="input" type="time" step="60" />
      </div>
      <div>
        <label class="hint">Timezone (offset)</label>
        <select id="tz" class="select"></select>
      </div>
    </div>

    <div class="card" style="margin-top:14px">
      <div class="row">
        <div>
          <label class="hint">Mode A — Moon Longitude (0°–360°)</label>
          <input id="lon" class="input" type="number" min="0" max="360" step="0.01" placeholder="e.g., 125.33" />
        </div>
        <div style="display:flex;align-items:end"><span class="hint">→ Agar aapke paas exact longitude nahi hai, Mode B use karein.</span></div>
      </div>
      <div style="margin:10px 0;text-align:center" class="hint">OR</div>
      <div class="row">
        <div>
          <label class="hint">Mode B — Nakshatra</label>
          <select id="nak" class="select"></select>
        </div>
        <div>
          <label class="hint">Pada (1–4)</label>
          <select id="pada" class="select">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
          </select>
        </div>
      </div>
    </div>

    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:14px">
      <button class="btn" id="calcBtn" type="button">Calculate 🔮</button>
      <button class="ghost" id="resetBtn" type="button">Reset</button>
    </div>
  </div>

  <div class="card">
    <h2>Results</h2>
    <div id="summary" class="lead">Fill the inputs and click Calculate.</div>

    <h3 style="margin-top:14px">Mahadasha Timeline</h3>
    <table class="table" id="mdTable">
      <thead><tr><th>Lord</th><th>Start</th><th>End</th><th>Years</th></tr></thead>
      <tbody></tbody>
    </table>

    <h3 style="margin-top:14px">Antardasha (Current Mahadasha)</h3>
    <table class="table" id="adTable">
      <thead><tr><th>Sub-lord</th><th>Start</th><th>End</th><th>Months</th></tr></thead>
      <tbody></tbody>
    </table>

    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
      <button class="btn" id="shareBtn" type="button">Share</button>
      <button class="ghost" id="copyBtn" type="button">Copy</button>
      <a class="ghost" id="waBtn" target="_blank" rel="noopener">Share on WhatsApp</a>
    </div>
  </div>
</section>

<section id="about" class="section grid">
  <div class="card">
    <h2>How this works</h2>
    <p class="lead">Vimshottari (120-year) Dasha sequence: Ketu(7), Venus(20), Sun(6), Moon(10), Mars(7), Rahu(18), Jupiter(16), Saturn(19), Mercury(17).</p>
    <div style="height:8px"></div>
    <p>Birth Moon jis <em>Nakshatra</em> me hota hai, uske lord ki Mahadasha active hoti hai. Balance at birth = nakshatra me bache hue hisse ka proportion × us lord ki total years. Wahi se timeline aage chalti hai. Antardasha durations proportional hoti hain: <code>MD_years × AD_lord_years / 120</code>.</p>
    <p class="hint" style="margin-top:6px">Note: Accurate timeline ke liye Moon longitude/Nakshatra sahi hona chahiye. Yeh tool astronomical calc external APIs ke bina chale — isliye aap longitude kisi trusted app se le aayen.</p>
  </div>
  <div class="card">
    <h2>Part of Divine Path</h2>
    <p class="lead">Yeh calculator meri main website (<strong>Divine Path — Tarot by Poonam</strong>) ka hi extension hai. Numerology, Tarot & Dasha insights ek saath for clarity ✨</p>
  </div>
</section>

<section id="contact" class="section">
  <h2>Let’s Connect ✨</h2>
  <p class="lead">Book your session or share your report.</p>
  <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(260px,1fr))">
    <a href="mailto:divinepath743@gmail.com" class="card" style="text-decoration:none;color:var(--text)">
      <div class="kicker" style="color:#bcd2ff">Email</div>
      <div style="font-weight:800">divinepath743@gmail.com</div>
    </a>
    <a href="https://wa.me/919835230370" target="_blank" rel="noopener" class="card" style="text-decoration:none;color:var(--text)">
      <div class="kicker" style="color:#bcd2ff">WhatsApp</div>
      <div style="font-weight:800">+91 9835230370</div>
    </a>
    <a href="https://instagram.com/punamtarotcardreader" target="_blank" rel="noopener" class="card" style="text-decoration:none;color:var(--text)">
      <div class="kicker" style="color:#bcd2ff">Instagram</div>
      <div style="font-weight:800">@punamtarotcardreader</div>
    </a>
  </div>
</section>

<footer>
  Part of the Divine Path • © 2025 Poonam/Poornika — All Rights Reserved • Built with ❤️
</footer>

<script>
// ---- Dasha core data ----
const LORDS = ["Ketu","Venus","Sun","Moon","Mars","Rahu","Jupiter","Saturn","Mercury"];
const YEARS = {Ketu:7, Venus:20, Sun:6, Moon:10, Mars:7, Rahu:18, Jupiter:16, Saturn:19, Mercury:17};
const NAKS = [
  {name:"Ashwini", lord:"Ketu"}, {name:"Bharani", lord:"Venus"}, {name:"Krittika", lord:"Sun"},
  {name:"Rohini", lord:"Moon"}, {name:"Mrigashira", lord:"Mars"}, {name:"Ardra", lord:"Rahu"},
  {name:"Punarvasu", lord:"Jupiter"}, {name:"Pushya", lord:"Saturn"}, {name:"Ashlesha", lord:"Mercury"},
  {name:"Magha", lord:"Ketu"}, {name:"Purva Phalguni", lord:"Venus"}, {name:"Uttara Phalguni", lord:"Sun"},
  {name:"Hasta", lord:"Moon"}, {name:"Chitra", lord:"Mars"}, {name:"Swati", lord:"Rahu"},
  {name:"Vishakha", lord:"Jupiter"}, {name:"Anuradha", lord:"Saturn"}, {name:"Jyeshtha", lord:"Mercury"},
  {name:"Mula", lord:"Ketu"}, {name:"Purva Ashadha", lord:"Venus"}, {name:"Uttara Ashadha", lord:"Sun"},
  {name:"Shravana", lord:"Moon"}, {name:"Dhanishtha", lord:"Mars"}, {name:"Shatabhisha", lord:"Rahu"},
  {name:"Purva Bhadrapada", lord:"Jupiter"}, {name:"Uttara Bhadrapada", lord:"Saturn"}, {name:"Revati", lord:"Mercury"}
];
const NAK_SIZE = 13 + 20/60; // 13°20' in degrees

// ---- UI setup ----
const tzSel = document.getElementById('tz');
(function fillTZ(){
  const zones = [
    -720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-150,-120,-60,0,60,330,345,360,390,420,480,525,540,570,600,630,660,720
  ];
  zones.forEach(min=>{
    const h = Math.floor(Math.abs(min)/60), m = Math.abs(min)%60;
    const sign = min>=0?'+':'-';
    const opt = document.createElement('option');
    opt.value = min; opt.textContent = `UTC ${sign}${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`;
    if(min===330) opt.selected = true; // IST default
    tzSel.appendChild(opt);
  });
})();

const nakSel = document.getElementById('nak');
NAKS.forEach((n,i)=>{ const o=document.createElement('option'); o.value=i; o.textContent=`${i+1}. ${n.name} — ${n.lord}`; nakSel.appendChild(o); });

// ---- helpers ----
function toLocal(date, tzMin){ // format with offset
  const d = new Date(date.getTime() + tzMin*60*1000);
  const y=d.getUTCFullYear(); const mo=String(d.getUTCMonth()+1).padStart(2,'0'); const da=String(d.getUTCDate()).padStart(2,'0');
  const hh=String(d.getUTCHours()).padStart(2,'0'); const mm=String(d.getUTCMinutes()).padStart(2,'0');
  return `${y}-${mo}-${da} ${hh}:${mm}`;
}
function addDays(date, days){ return new Date(date.getTime() + days*86400000); }
function yearsToDays(y){ return y*365.25; }
function monthsFromDays(d){ return (d/30.436875).toFixed(1); }

function dashaSequenceFrom(lord){
  const i = LORDS.indexOf(lord); return LORDS.slice(i).concat(LORDS.slice(0,i));
}

function nakFromLongitude(lon){ // 0..360 -> 0..26 index
  let idx = Math.floor(lon / NAK_SIZE); if(idx<0) idx=0; if(idx>26) idx=26; return idx;
}

function balanceAtBirth(lon, lord){
  const within = lon % NAK_SIZE; // degrees into current nakshatra
  const frac = within / NAK_SIZE; // traversed
  const rem = 1 - frac; // remaining fraction at birth
  return rem * YEARS[lord]; // years left in current MD at birth
}

function calcFromInputs(){
  const name = document.getElementById('name').value.trim();
  const dob = document.getElementById('dob').value; // YYYY-MM-DD
  const tob = document.getElementById('tob').value; // HH:MM
  const tz = parseInt(document.getElementById('tz').value,10); // minutes
  const lonStr = document.getElementById('lon').value.trim();
  const nakIdx = parseInt(document.getElementById('nak').value,10);
  const pada = parseInt(document.getElementById('pada').value,10);

  if(!dob || !tob){ alert('Please enter Date and Time of birth.'); return; }

  let lon = Number.isFinite(parseFloat(lonStr)) ? parseFloat(lonStr) : null;
  if(lon===null){ // derive from Nakshatra + Pada center
    const base = nakIdx * NAK_SIZE; // start of nak
    const padSize = NAK_SIZE/4; // 3°20'
    lon = base + (pada-1)*padSize + padSize/2; // center of pada as approximation
  }
  if(lon<0 || lon>=360){ alert('Moon longitude must be between 0° and 360°.'); return; }

  // find janma nakshatra and lord
  const jIdx = nakFromLongitude(lon);
  const jNak = NAKS[jIdx];
  const mdLord = jNak.lord;

  // birth datetime as UTC baseline (we only use for display sequencing)
  const [y,m,d] = dob.split('-').map(Number);
  const [hh,mm] = tob.split(':').map(Number);
  // convert local birth to UTC by subtracting tz offset
  const birthUTC = new Date(Date.UTC(y, m-1, d, hh, mm) - tz*60000);

  // MD sequence & timeline
  const seq = dashaSequenceFrom(mdLord);
  const firstBalanceYears = balanceAtBirth(lon, mdLord);

  const rowsMD = [];
  let cursor = new Date(birthUTC); // MD start at birth - balance
  cursor = addDays(cursor, -yearsToDays(YEARS[mdLord] - firstBalanceYears)); // rewind to actual MD start

  let currentMDIndex = -1; const nowUTC = new Date();

  seq.forEach((lord, idx)=>{
    const years = YEARS[lord];
    const start = new Date(cursor);
    const end = addDays(start, yearsToDays(years));
    if(nowUTC>=start && nowUTC<end){ currentMDIndex = idx; }
    rowsMD.push({lord,years,start,end});
    cursor = new Date(end);
  });

  // Antardasha for current MD
  const adRows = [];
  if(currentMDIndex>=0){
    const md = rowsMD[currentMDIndex];
    const adSeq = dashaSequenceFrom(md.lord);
    let adCursor = new Date(md.start);
    adSeq.forEach(sub=>{
      const months = (YEARS[md.lord] * YEARS[sub] / 120) * 12; // months
      const days = months * 30.436875;
      const aStart = new Date(adCursor);
      const aEnd = addDays(aStart, days);
      adRows.push({lord:sub, start:aStart, end:aEnd, months});
      adCursor = new Date(aEnd);
    });
  }

  // Render
  const tzMin = tz;
  const fmt = (dt)=> toLocal(dt, tzMin);
  const mdTbody = document.querySelector('#mdTable tbody');
  mdTbody.innerHTML = '';
  rowsMD.forEach((r,idx)=>{
    const tr = document.createElement('tr');
    const isCurrent = (idx===currentMDIndex);
    tr.innerHTML = `<td>${r.lord}${isCurrent? ' <span class="tag">current</span>':''}</td><td>${fmt(r.start)}</td><td>${fmt(r.end)}</td><td>${r.years}</td>`;
    if(isCurrent){ tr.querySelectorAll('td').forEach(td=>td.classList.add('current')); }
    mdTbody.appendChild(tr);
  });

  const adTbody = document.querySelector('#adTable tbody');
  adTbody.innerHTML = '';
  adRows.forEach(r=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${r.lord}</td><td>${fmt(r.start)}</td><td>${fmt(r.end)}</td><td>${(r.months).toFixed(1)}</td>`;
    if(new Date()>=r.start && new Date()<r.end){ tr.querySelectorAll('td').forEach(td=>td.classList.add('current')); }
    adTbody.appendChild(tr);
  });

  const summary = document.getElementById('summary');
  summary.innerHTML = `Name: <b>${name||'-'}</b> • DOB: <b>${dob}</b> ${tob?(''+tob):''} (UTC offset ${document.getElementById('tz').selectedOptions[0].textContent})<br>`+
    `Janma Nakshatra: <b>${jIdx+1}. ${jNak.name}</b> — Lord: <b>${mdLord}</b> • Moon λ: <b>${lon.toFixed(2)}°</b><br>`+
    `Balance at birth in ${mdLord} MD: <b>${firstBalanceYears.toFixed(2)}</b> years`;

  // Share content
  const report = [
    'Vimshottari Dasha Report — Divine Path',
    `Name: ${name||'-'}`,
    `DOB: ${dob} ${tob} (${document.getElementById('tz').selectedOptions[0].textContent})`,
    `Moon: ${lon.toFixed(2)}° | Nakshatra: ${jNak.name} (${mdLord})`,
    `Balance at birth: ${firstBalanceYears.toFixed(2)} yrs`,
    '',
    'Mahadasha:',
    ...rowsMD.map(r=>`- ${r.lord}: ${fmt(r.start)} → ${fmt(r.end)} (${r.years}y)`),
    '',
    'Antardasha (current MD):',
    ...adRows.map(r=>`- ${r.lord}: ${fmt(r.start)} → ${fmt(r.end)} (${r.months.toFixed(1)} mo)`)
  ].join('\n');

  const wa = `https://wa.me/919835230370?text=${encodeURIComponent(report)}`;
  document.getElementById('waBtn').href = wa;
  document.getElementById('shareBtn').onclick = async ()=>{
    if(navigator.share){ try{ await navigator.share({title:'Vimshottari Dasha Report', text: report}); }catch(e){} }
    else{ alert('Sharing not supported on this device. Use Copy or WhatsApp.'); }
  };
  document.getElementById('copyBtn').onclick = async ()=>{
    try{ await navigator.clipboard.writeText(report); alert('Copied to clipboard!'); }catch(e){ alert('Copy failed.'); }
  };
}

document.getElementById('calcBtn').addEventListener('click', calcFromInputs);

document.getElementById('resetBtn').addEventListener('click', ()=>{
  ['name','dob','tob','lon'].forEach(id=> document.getElementById(id).value='');
  document.getElementById('nak').selectedIndex=0; document.getElementById('pada').value='1';
  const mdTbody = document.querySelector('#mdTable tbody'); mdTbody.innerHTML='';
  const adTbody = document.querySelector('#adTable tbody'); adTbody.innerHTML='';
  document.getElementById('summary').textContent='Fill the inputs and click Calculate.';
});

// parallax hero
const bg = document.querySelector('.hero .bg');
window.addEventListener('mousemove',(e)=>{ const x=(e.clientX/innerWidth-.5)*10; const y=(e.clientY/innerHeight-.5)*10; bg.style.transform=`scale(1.06) translate(${x}px, ${y}px)`; });
</script>
</body>
</html>
